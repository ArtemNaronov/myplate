-- Тестовые данные для приложения MyPlate

-- Примеры пользователей (для тестирования)
INSERT INTO users (telegram_id, username, first_name, last_name) VALUES
(123456789, 'testuser', 'Test', 'User'),
(987654321, 'demo', 'Demo', 'User')
ON CONFLICT (telegram_id) DO NOTHING;

-- Примеры рецептов
INSERT INTO recipes (name, description, calories, proteins, fats, carbs, price, cooking_time, servings, meal_type, diet_type, allergens, ingredients, instructions) VALUES
(
    'Яичница с тостом',
    'Классический завтрак с богатыми белком яйцами и цельнозерновым тостом',
    350,
    20.0,
    18.0,
    28.0,
    3.50,
    10,
    1,
    'breakfast',
    ARRAY['vegetarian'],
    ARRAY['eggs', 'dairy'],
    '[
        {"name": "Яйца", "quantity": 2, "unit": "шт"},
        {"name": "Масло", "quantity": 10, "unit": "г"},
        {"name": "Хлеб", "quantity": 2, "unit": "ломтика"},
        {"name": "Соль", "quantity": 1, "unit": "щепотка"},
        {"name": "Перец", "quantity": 1, "unit": "щепотка"}
    ]'::jsonb,
    ARRAY[
        'Разбейте 2 яйца в миску, добавьте соль и перец по вкусу',
        'Взбейте яйца вилкой до однородной массы',
        'Разогрейте сковороду на среднем огне и добавьте масло',
        'Когда масло растает, вылейте яйца на сковороду',
        'Жарьте яичницу, постоянно помешивая лопаткой, до желаемой консистенции (2-3 минуты)',
        'Пока яичница готовится, поджарьте хлеб в тостере или на сковороде',
        'Выложите готовую яичницу на тарелку и подавайте с горячим тостом'
    ]
),
(
    'Греческий салат',
    'Свежий средиземноморский салат с сыром фета и оливками',
    280,
    12.0,
    22.0,
    15.0,
    5.00,
    15,
    1,
    'lunch',
    ARRAY['vegetarian', 'gluten-free'],
    ARRAY['dairy'],
    '[
        {"name": "Помидоры", "quantity": 200, "unit": "г"},
        {"name": "Огурец", "quantity": 150, "unit": "г"},
        {"name": "Сыр Фета", "quantity": 100, "unit": "г"},
        {"name": "Оливки", "quantity": 50, "unit": "г"},
        {"name": "Оливковое масло", "quantity": 20, "unit": "мл"},
        {"name": "Лимонный сок", "quantity": 10, "unit": "мл"},
        {"name": "Орегано", "quantity": 2, "unit": "г"}
    ]'::jsonb,
    ARRAY[
        'Вымойте помидоры и огурец, нарежьте их крупными кубиками',
        'Сыр фета нарежьте кубиками размером примерно 1 см',
        'Сложите нарезанные помидоры и огурец в большую миску',
        'Добавьте к овощам кубики феты',
        'Добавьте оливки (можно разрезать пополам)',
        'В отдельной маленькой миске смешайте оливковое масло и лимонный сок',
        'Заправьте салат получившейся заправкой и аккуратно перемешайте',
        'Посыпьте салат сушёным орегано и подавайте сразу'
    ]
),
(
    'Куриная грудка на гриле с рисом',
    'Постный белок с сложными углеводами для сбалансированного ужина',
    450,
    45.0,
    8.0,
    45.0,
    7.50,
    30,
    1,
    'dinner',
    ARRAY['gluten-free'],
    ARRAY[]::text[],
    '[
        {"name": "Куриная грудка", "quantity": 200, "unit": "г"},
        {"name": "Рис", "quantity": 100, "unit": "г"},
        {"name": "Оливковое масло", "quantity": 15, "unit": "мл"},
        {"name": "Соль", "quantity": 2, "unit": "г"},
        {"name": "Перец", "quantity": 1, "unit": "г"},
        {"name": "Чеснок", "quantity": 2, "unit": "зубчика"}
    ]'::jsonb,
    ARRAY[
        'Промойте куриную грудку и обсушите бумажным полотенцем',
        'Натрите грудку солью, перцем и измельчённым чесноком, оставьте мариноваться на 10 минут',
        'Разогрейте сковороду-гриль или обычную сковороду на среднем огне',
        'Добавьте немного оливкового масла и выложите куриную грудку',
        'Жарьте курицу по 6-7 минут с каждой стороны до золотистой корочки и готовности внутри',
        'Пока курица готовится, промойте рис и сварите его согласно инструкции на упаковке',
        'Проверьте готовность курицы: сок должен быть прозрачным, а мясо белым',
        'Подавайте горячую куриную грудку с рисом, украсив свежей зеленью'
    ]
),
(
    'Овсянка с ягодами',
    'Здоровый завтрак с клетчаткой и антиоксидантами',
    320,
    12.0,
    8.0,
    55.0,
    4.00,
    10,
    1,
    'breakfast',
    ARRAY['vegetarian', 'vegan', 'gluten-free'],
    ARRAY[]::text[],
    '[
        {"name": "Овсянка", "quantity": 50, "unit": "г"},
        {"name": "Миндальное молоко", "quantity": 200, "unit": "мл"},
        {"name": "Черника", "quantity": 50, "unit": "г"},
        {"name": "Клубника", "quantity": 50, "unit": "г"},
        {"name": "Мёд", "quantity": 15, "unit": "мл"}
    ]'::jsonb,
    ARRAY[
        'Налейте миндальное молоко в кастрюлю и подогрейте на среднем огне',
        'Когда молоко начнёт закипать, добавьте овсянку, постоянно помешивая',
        'Уменьшите огонь до минимума и варите овсянку 5-7 минут, периодически помешивая',
        'Когда овсянка загустеет и впитает большую часть молока, снимите с огня',
        'Вымойте ягоды (чернику и клубнику) и нарежьте клубнику на половинки',
        'Выложите готовую овсянку в миску',
        'Украсьте овсянку свежими ягодами сверху',
        'Полейте мёдом по вкусу и сразу подавайте'
    ]
),
(
    'Паста Карбонара',
    'Классическая итальянская паста с яйцами, сыром и беконом',
    580,
    25.0,
    28.0,
    55.0,
    6.50,
    20,
    1,
    'dinner',
    ARRAY['vegetarian'],
    ARRAY['eggs', 'dairy', 'gluten'],
    '[
        {"name": "Паста", "quantity": 100, "unit": "г"},
        {"name": "Бекон", "quantity": 50, "unit": "г"},
        {"name": "Яйца", "quantity": 2, "unit": "шт"},
        {"name": "Пармезан", "quantity": 50, "unit": "г"},
        {"name": "Чёрный перец", "quantity": 2, "unit": "г"}
    ]'::jsonb,
    ARRAY[
        'Поставьте большую кастрюлю с подсоленной водой на огонь и доведите до кипения',
        'Когда вода закипит, добавьте пасту и варите согласно инструкции на упаковке до состояния аль денте',
        'Пока паста варится, нарежьте бекон небольшими кусочками',
        'Обжарьте бекон на сковороде на среднем огне до хрустящей корочки (5-7 минут)',
        'В отдельной миске взбейте яйца и натёртый пармезан до однородной массы',
        'Когда паста будет готова, слейте воду, оставив немного воды для соуса',
        'Соедините горячую пасту с беконом в сковороде',
        'Снимите сковороду с огня и быстро добавьте яичную смесь, интенсивно помешивая',
        'Тепло пасты приготовит яйца, создав кремовый соус',
        'Приправьте свежемолотым чёрным перцем и сразу подавайте'
    ]
),
(
    'Боул с киноа и овощами',
    'Питательное растительное блюдо с полноценным белком',
    380,
    15.0,
    12.0,
    58.0,
    5.50,
    25,
    1,
    'lunch',
    ARRAY['vegetarian', 'vegan', 'gluten-free'],
    ARRAY[]::text[],
    '[
        {"name": "Киноа", "quantity": 80, "unit": "г"},
        {"name": "Болгарский перец", "quantity": 100, "unit": "г"},
        {"name": "Кабачок", "quantity": 100, "unit": "г"},
        {"name": "Нут", "quantity": 100, "unit": "г"},
        {"name": "Оливковое масло", "quantity": 15, "unit": "мл"},
        {"name": "Лимонный сок", "quantity": 10, "unit": "мл"}
    ]'::jsonb,
    ARRAY[
        'Промойте киноа под проточной водой в сите',
        'Сварите киноа: залейте водой в соотношении 1:2, доведите до кипения, убавьте огонь и варите 15 минут',
        'Пока киноа варится, разогрейте духовку до 200°C',
        'Нарежьте болгарский перец и кабачок крупными кубиками',
        'Выложите овощи на противень, сбрызните оливковым маслом и запекайте 20 минут до мягкости',
        'Если используете консервированный нут, промойте его под водой',
        'Когда киноа и овощи готовы, дайте им немного остыть',
        'Смешайте киноа с запечёнными овощами в большой миске',
        'Добавьте нут и аккуратно перемешайте',
        'Заправьте блюдо оливковым маслом и лимонным соком, приправьте солью и перцем по вкусу',
        'Подавайте тёплым или комнатной температуры'
    ]
),
(
    'Лосось с бататом',
    'Рыба, богатая омега-3, со сложными углеводами',
    420,
    35.0,
    15.0,
    35.0,
    9.00,
    35,
    1,
    'dinner',
    ARRAY['gluten-free'],
    ARRAY['fish'],
    '[
        {"name": "Филе лосося", "quantity": 150, "unit": "г"},
        {"name": "Батат", "quantity": 200, "unit": "г"},
        {"name": "Брокколи", "quantity": 150, "unit": "г"},
        {"name": "Оливковое масло", "quantity": 15, "unit": "мл"},
        {"name": "Лимон", "quantity": 0.5, "unit": "шт"},
        {"name": "Соль", "quantity": 2, "unit": "г"},
        {"name": "Перец", "quantity": 1, "unit": "г"}
    ]'::jsonb,
    ARRAY[
        'Разогрейте духовку до 200°C для батата',
        'Очистите батат и нарежьте крупными дольками',
        'Выложите батат на противень, сбрызните оливковым маслом, посолите и запекайте 25-30 минут',
        'Пока батат запекается, приправьте филе лосося солью и перцем с обеих сторон',
        'Разогрейте сковороду на среднем огне и добавьте немного оливкового масла',
        'Обжарьте лосося кожей вниз 4-5 минут, затем переверните и жарьте ещё 3-4 минуты',
        'Пока лосось жарится, приготовьте брокколи на пару: доведите воду до кипения в пароварке, готовьте 5-7 минут',
        'Проверьте готовность лосося: мясо должно легко расслаиваться вилкой',
        'Выложите готовый лосось, батат и брокколи на тарелку',
        'Украсьте дольками лимона и подавайте горячим'
    ]
),
(
    'Тост с авокадо',
    'Простой и полезный завтрак с полезными жирами',
    290,
    8.0,
    18.0,
    28.0,
    4.50,
    5,
    1,
    'breakfast',
    ARRAY['vegetarian', 'vegan'],
    ARRAY['gluten'],
    '[
        {"name": "Хлеб", "quantity": 2, "unit": "ломтика"},
        {"name": "Авокадо", "quantity": 1, "unit": "шт"},
        {"name": "Лимонный сок", "quantity": 5, "unit": "мл"},
        {"name": "Соль", "quantity": 1, "unit": "щепотка"},
        {"name": "Хлопья красного перца", "quantity": 1, "unit": "щепотка"}
    ]'::jsonb,
    ARRAY[
        'Поджарьте хлеб в тостере или на сковороде до золотистой корочки',
        'Пока хлеб поджаривается, разрежьте авокадо пополам, удалите косточку',
        'Выньте мякоть авокадо ложкой в миску',
        'Разомните авокадо вилкой до желаемой консистенции (можно оставить кусочки)',
        'Добавьте к авокадо лимонный сок и щепотку соли, перемешайте',
        'Когда тосты готовы, намажьте на них получившуюся пасту из авокадо',
        'Посыпьте хлопьями красного перца для остроты и подавайте сразу'
    ]
),
(
    'Жаркое из говядины',
    'Быстрое и ароматное блюдо в азиатском стиле',
    520,
    40.0,
    20.0,
    45.0,
    8.50,
    20,
    1,
    'dinner',
    ARRAY['gluten-free'],
    ARRAY[]::text[],
    '[
        {"name": "Полоски говядины", "quantity": 150, "unit": "г"},
        {"name": "Болгарский перец", "quantity": 150, "unit": "г"},
        {"name": "Брокколи", "quantity": 100, "unit": "г"},
        {"name": "Соевый соус", "quantity": 20, "unit": "мл"},
        {"name": "Имбирь", "quantity": 5, "unit": "г"},
        {"name": "Чеснок", "quantity": 2, "unit": "зубчика"},
        {"name": "Растительное масло", "quantity": 15, "unit": "мл"}
    ]'::jsonb,
    ARRAY[
        'Нарежьте говядину тонкими полосками поперёк волокон',
        'Очистите и нарежьте чеснок и имбирь',
        'Нарежьте болгарский перец и брокколи на небольшие кусочки',
        'Разогрейте вок или большую сковороду на сильном огне',
        'Добавьте растительное масло и быстро обжарьте говядину 2-3 минуты до подрумянивания',
        'Выложите говядину на тарелку, оставив сок в сковороде',
        'В той же сковороде обжарьте овощи 3-4 минуты на сильном огне',
        'Верните говядину в сковороду к овощам',
        'Добавьте соевый соус, имбирь и чеснок, быстро перемешайте',
        'Готовьте ещё 1-2 минуты, пока овощи станут мягкими, но хрустящими',
        'Подавайте горячим, можно с рисом или лапшой'
    ]
),
(
    'Салат Цезарь',
    'Классический салат с салатом романо и соусом Цезарь',
    320,
    15.0,
    24.0,
    12.0,
    5.50,
    15,
    1,
    'lunch',
    ARRAY['vegetarian'],
    ARRAY['eggs', 'dairy', 'gluten'],
    '[
        {"name": "Салат Романо", "quantity": 150, "unit": "г"},
        {"name": "Соус Цезарь", "quantity": 30, "unit": "мл"},
        {"name": "Пармезан", "quantity": 30, "unit": "г"},
        {"name": "Сухарики", "quantity": 30, "unit": "г"},
        {"name": "Лимонный сок", "quantity": 5, "unit": "мл"}
    ]'::jsonb,
    ARRAY[
        'Вымойте салат романо под проточной водой и обсушите',
        'Нарежьте салат крупными кусочками или порвите руками',
        'Выложите салат в большую миску',
        'Добавьте соус Цезарь и аккуратно перемешайте, чтобы каждый лист был покрыт соусом',
        'Натрите пармезан на крупной тёрке',
        'Посыпьте салат пармезаном',
        'Добавьте сухарики и аккуратно перемешайте',
        'Сбрызните лимонным соком для свежести',
        'Подавайте сразу, пока сухарики хрустящие'
    ]
);

-- Примеры целей пользователя
INSERT INTO user_goals (user_id, daily_calories, target_proteins, target_fats, target_carbs, protein_ratio, fat_ratio, carb_ratio)
SELECT 
    u.id,
    2000,
    150.0,
    65.0,
    200.0,
    30.0,
    30.0,
    40.0
FROM users u
WHERE u.telegram_id = 123456789
ON CONFLICT (user_id) DO NOTHING;

-- Примеры продуктов кладовой
INSERT INTO pantry_items (user_id, name, quantity, unit)
SELECT 
    u.id,
    name,
    quantity,
    unit
FROM users u,
(VALUES
    -- Основные продукты
    ('Яйца', 12, 'шт'),
    ('Масло', 500, 'г'),
    ('Хлеб', 20, 'ломтиков'),
    ('Оливковое масло', 1000, 'мл'),
    ('Соль', 500, 'г'),
    ('Перец', 200, 'г'),
    ('Чеснок', 10, 'зубчика'),
    -- Овощи
    ('Помидоры', 1000, 'г'),
    ('Огурец', 500, 'г'),
    ('Болгарский перец', 500, 'г'),
    ('Кабачок', 500, 'г'),
    ('Брокколи', 500, 'г'),
    ('Батат', 1000, 'г'),
    ('Авокадо', 3, 'шт'),
    ('Салат Романо', 500, 'г'),
    -- Мясо и рыба
    ('Куриная грудка', 1000, 'г'),
    ('Филе лосося', 500, 'г'),
    ('Полоски говядины', 500, 'г'),
    ('Бекон', 200, 'г'),
    -- Крупы и зерновые
    ('Рис', 1000, 'г'),
    ('Овсянка', 500, 'г'),
    ('Киноа', 500, 'г'),
    ('Паста', 500, 'г'),
    -- Бобовые
    ('Нут', 500, 'г'),
    -- Молочные продукты
    ('Сыр Фета', 300, 'г'),
    ('Пармезан', 200, 'г'),
    ('Миндальное молоко', 1000, 'мл'),
    -- Фрукты и ягоды
    ('Черника', 200, 'г'),
    ('Клубника', 200, 'г'),
    ('Лимон', 3, 'шт'),
    ('Лимонный сок', 200, 'мл'),
    -- Дополнительные ингредиенты
    ('Оливки', 300, 'г'),
    ('Орегано', 50, 'г'),
    ('Мёд', 200, 'мл'),
    ('Чёрный перец', 100, 'г'),
    ('Хлопья красного перца', 50, 'г'),
    ('Соевый соус', 300, 'мл'),
    ('Имбирь', 100, 'г'),
    ('Растительное масло', 500, 'мл'),
    ('Соус Цезарь', 200, 'мл'),
    ('Сухарики', 200, 'г')
) AS items(name, quantity, unit)
WHERE u.telegram_id = 123456789
ON CONFLICT DO NOTHING;

